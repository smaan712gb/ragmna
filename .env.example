# M&A Financial Analysis Platform - Environment Variables
# Copy this file to .env and fill in your actual values

# ===== CORE SERVICE CONFIGURATION =====
SERVICE_API_KEY=your-secure-api-key-here-change-in-production

# ===== FRONTEND CORS CONFIGURATION =====
# Comma-separated list of allowed frontend origins for CORS
# For production, add your production frontend URL
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ===== AUTHENTICATION CONFIGURATION =====
# JWT Secret Key for authentication service (CHANGE IN PRODUCTION!)
# Generate secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-secure-jwt-secret-key-change-in-production

# Access token expiry in minutes (default: 60 minutes)
ACCESS_TOKEN_EXPIRY_MINUTES=60

# Refresh token expiry in days (default: 7 days)
REFRESH_TOKEN_EXPIRY_DAYS=7

# ===== GOOGLE CLOUD CONFIGURATION =====
# Your Google Cloud Project ID
PROJECT_ID=your-gcp-project-id
VERTEX_PROJECT=your-gcp-project-id
VERTEX_LOCATION=us-central1

# Google Cloud Storage Bucket for RAG corpus data
GCS_BUCKET=your-ma-data-bucket

# Google Cloud Service Account Key Path (use secrets/gcp-service-key.json)
GOOGLE_CLOUD_KEY_PATH=secrets/gcp-service-key.json

# ===== API KEYS =====
# Financial Modeling Prep API Key (get from https://financialmodelingprep.com)
FMP_API_KEY=your-fmp-api-key

# Gemini API Key (required for company classification and analysis)
GEMINI_API_KEY=your-gemini-api-key

# ===== VERTEX AI RAG ENGINE CONFIGURATION (REQUIRED) =====
# CRITICAL: RAG Corpus ID from Vertex AI RAG Engine
# Create corpus: gcloud ai rag-corpora create --display-name="ma-analysis" --location=us-central1
RAG_CORPUS_ID=your-rag-corpus-id

# RAG Embedding Model (text-embedding-005 recommended)
RAG_EMBEDDING_MODEL=text-embedding-005

# RAG Chunking Configuration
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200

# Max embedding requests per minute for RAG Engine imports
MAX_EMBEDDING_QPM=1000

# ===== SERVICE URLS (for production deployment) =====
# Leave defaults for docker-compose, update for Cloud Run/K8s
DATA_INGESTION_URL=http://data-ingestion:8080
LLM_ORCHESTRATOR_URL=http://llm-orchestrator:8080
FINANCIAL_NORMALIZER_URL=http://financial-normalizer:8080
THREE_STATEMENT_MODELER_URL=http://three-statement-modeler:8080
DCF_VALUATION_URL=http://dcf-valuation:8080
CCA_VALUATION_URL=http://cca-valuation:8080
LBO_ANALYSIS_URL=http://lbo-analysis:8080
MERGERS_MODEL_URL=http://mergers-model:8080
PRECEDENT_TRANSACTIONS_URL=http://precedent-transactions:8080
DD_AGENT_URL=http://dd-agent:8080
BOARD_REPORTING_URL=http://board-reporting:8080
EXCEL_EXPORTER_URL=http://excel-exporter:8080
RUN_MANAGER_URL=http://run-manager:8080
QA_ENGINE_URL=http://qa-engine:8080

# ===== LOGGING & MONITORING =====
LOG_LEVEL=INFO
ENABLE_TELEMETRY=true

# ===== PRODUCTION FLAGS =====
PRODUCTION_MODE=false
ENABLE_API_KEY_AUTH=true

# ===== REQUIRED IAM PERMISSIONS =====
# Your service account needs these IAM roles:
# - roles/aiplatform.user
# - roles/aiplatform.ragResourceUser
# - roles/storage.objectAdmin
# - roles/iam.serviceAccountTokenCreator
#
# Grant permissions:
# gcloud projects add-iam-policy-binding PROJECT_ID \
#   --member="serviceAccount:SERVICE_ACCOUNT_EMAIL" \
#   --role="roles/aiplatform.user"
#
# gcloud projects add-iam-policy-binding PROJECT_ID \
#   --member="serviceAccount:SERVICE_ACCOUNT_EMAIL" \
#   --role="roles/aiplatform.ragResourceUser"
